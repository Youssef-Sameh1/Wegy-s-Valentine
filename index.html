<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>For Wegy ❤️</title>
    <style>
        /* --- DISNEY VIBES CSS --- */
        @import url('https://fonts.googleapis.com/css2?family=Great+Vibes&family=Poppins:wght@300;600&display=swap');

        body {
            margin: 0;
            padding: 0;
            height: 100vh;
            width: 100vw;
            background: radial-gradient(circle at bottom, #1b2735 0%, #090a0f 100%);
            color: white;
            font-family: 'Poppins', sans-serif;
            overflow: hidden;
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
        }

        /* Starry Background */
        .stars {
            position: fixed;
            top: 0; left: 0; width: 100%; height: 100%;
            z-index: -1;
            background: transparent;
            box-shadow: 
                10vw 10vh 1px white, 20vw 50vh 1px white, 30vw 20vh 2px white,
                40vw 80vh 1px white, 60vw 10vh 2px white, 80vw 60vh 1px white,
                90vw 20vh 1px white, 50vw 50vh 2px white;
            animation: twinkle 5s infinite alternate;
        }
        @keyframes twinkle {
            0% { opacity: 0.5; transform: translateY(0px); }
            100% { opacity: 1; transform: translateY(-10px); }
        }

        .container {
            text-align: center;
            position: relative;
            z-index: 10;
            width: 90%;
            max-width: 800px;
        }

        h1 {
            font-family: 'Great Vibes', cursive;
            font-size: 3.5rem;
            text-shadow: 0 0 10px #ff69b4, 0 0 20px #ff69b4;
            margin: 10px 0 20px 0;
            color: #fff0f5;
            line-height: 1.2;
        }

        .video-frame {
            border: 4px solid #d4af37;
            border-radius: 15px;
            box-shadow: 0 0 25px rgba(212, 175, 55, 0.4);
            overflow: hidden;
            background: #000;
            margin: 0 auto 20px auto;
            width: 100%;
            max-width: 600px;
            aspect-ratio: 16/9;
            position: relative;
        }

        video {
            width: 100%;
            height: 100%;
            object-fit: cover;
            display: block;
        }

        .buttons {
            display: flex;
            gap: 30px;
            justify-content: center;
            align-items: center;
            height: 80px; /* Fixed height to prevent layout shift */
        }

        button {
            padding: 12px 40px;
            font-size: 1.3rem;
            border: none;
            border-radius: 50px;
            cursor: pointer;
            font-family: 'Poppins', sans-serif;
            font-weight: 600;
            transition: all 0.3s ease; /* Smooth transition for movements */
            -webkit-tap-highlight-color: transparent;
            position: relative; /* Needed for initial layout */
            z-index: 20;
        }

        #yesBtn {
            background: linear-gradient(45deg, #ff6b6b, #ff8e8e);
            color: white;
            box-shadow: 0 5px 15px rgba(255, 107, 107, 0.4);
        }
        #yesBtn:active { transform: scale(0.95); }

        #noBtn {
            background: rgba(255, 255, 255, 0.2);
            color: #ddd;
            border: 1px solid rgba(255,255,255,0.4);
        }

        /* Responsive Adjustments */
        @media (max-width: 600px) {
            h1 { font-size: 2.5rem; }
            button { padding: 10px 25px; font-size: 1.1rem; }
        }

        /* Success Screen */
        #success-screen {
            display: none;
            position: absolute;
            top: 0; left: 0; width: 100%; height: 100%;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            background: rgba(0,0,0,0.9);
            z-index: 100;
        }

        .success-text {
            font-family: 'Great Vibes', cursive;
            font-size: 4rem;
            color: #ffd700;
            animation: pop 1s ease forwards;
            margin-bottom: 20px;
        }
        @keyframes pop {
            0% { transform: scale(0); }
            80% { transform: scale(1.2); }
            100% { transform: scale(1); }
        }
    </style>
</head>
<body>

    <div class="stars"></div>

    <div class="container" id="question-screen">
        <div class="video-frame">
            <video id="trampVideo" src="lady_tramp.mp4" muted playsinline preload="auto"></video>
        </div>

        <h1>Would you be my valentine Wegy?</h1>

        <div class="buttons">
            <button id="yesBtn">Yes</button>
            <button id="noBtn">No</button>
        </div>
        
        <p style="font-size: 0.8rem; opacity: 0.6; margin-top: 15px;">
            (Move cursor or drag finger ✨)
        </p>
    </div>

    <div id="success-screen">
        <h1 class="success-text">YAAAYYYY!!!!</h1>
        <div class="video-frame" style="width: 90%; max-width: 800px;">
            <video id="aladdinVideo" src="aladdin.mp4" playsinline></video>
        </div>
    </div>

    <script>
        const trampVideo = document.getElementById('trampVideo');
        const yesBtn = document.getElementById('yesBtn');
        const noBtn = document.getElementById('noBtn');
        const questionScreen = document.getElementById('question-screen');
        const successScreen = document.getElementById('success-screen');
        const aladdinVideo = document.getElementById('aladdinVideo');

        // ANIMATION SETTINGS
        const KISS_TIME = 5.0; 
        const MAX_DISTANCE = 500; 
        
        // Variables for smooth animation
        let targetTime = 0;
        let isAnimating = true;

        // --- 1. SMOOTH VIDEO SCRUBBING LOGIC ---
        
        // Input Handler (Mouse or Touch)
        function handleInput(x, y) {
            const rect = yesBtn.getBoundingClientRect();
            const btnX = rect.left + rect.width / 2;
            const btnY = rect.top + rect.height / 2;
            
            const dist = Math.hypot(x - btnX, y - btnY);

            // Calculate "Ideal" time
            let proximity = 1 - (dist / MAX_DISTANCE);
            if (proximity < 0) proximity = 0;

            // Mobile multiplier (make it easier)
            if (window.innerWidth < 600) {
                proximity = proximity * 1.3; 
                if (proximity > 1) proximity = 1;
            }

            // Set the target time (we don't set video time yet!)
            targetTime = proximity * KISS_TIME;
        }

        // The "Game Loop" - Runs 60 times a second for smoothness
        function animateVideo() {
            if (isAnimating && trampVideo.readyState >= 1) {
                // Smoothly move current time towards target time
                // The '0.1' is the speed factor. Lower = smoother/slower. Higher = snappier.
                const diff = targetTime - trampVideo.currentTime;
                
                // Only update if difference is noticeable (saves CPU)
                if (Math.abs(diff) > 0.01) {
                    trampVideo.currentTime += diff * 0.1; 
                }
            }
            requestAnimationFrame(animateVideo);
        }
        
        // Start the loop
        animateVideo();

        // Listeners for Input
        document.addEventListener('mousemove', (e) => handleInput(e.clientX, e.clientY));
        document.addEventListener('touchmove', (e) => {
            e.preventDefault(); 
            const touch = e.touches[0];
            handleInput(touch.clientX, touch.clientY);
        }, { passive: false });


        // --- 2. THE RUNAWAY "NO" BUTTON ---

        function moveButtonAway() {
            // Get screen dimensions
            const maxX = window.innerWidth - noBtn.offsetWidth - 20;
            const maxY = window.innerHeight - noBtn.offsetHeight - 20;

            // Calculate random position
            const randomX = Math.random() * maxX;
            const randomY = Math.random() * maxY;

            // Apply "Fixed" position so it can jump anywhere on screen
            noBtn.style.position = 'fixed';
            noBtn.style.left = randomX + 'px';
            noBtn.style.top = randomY + 'px';
        }

        // Trigger on hover (Desktop) and touch (Mobile)
        noBtn.addEventListener('mouseover', moveButtonAway);
        noBtn.addEventListener('touchstart', (e) => {
            e.preventDefault(); // Stop click from happening
            moveButtonAway();
        });


        // --- 3. YES BUTTON LOGIC ---
        yesBtn.addEventListener('click', () => {
            isAnimating = false; // Stop the loop
            questionScreen.style.display = 'none';
            successScreen.style.display = 'flex';
            aladdinVideo.play();
            aladdinVideo.volume = 1.0;
        });

    </script>
</body>
</html>